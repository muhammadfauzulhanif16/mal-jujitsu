import{r as P,j as e,B as o}from"./app-42ztUqCq.js";import{d as $,A as R,S as g,G as n,T as F,a as M,B as z,b as I,k as a}from"./AppLayout-DU9WNuPn.js";import{B as N}from"./Breadcrumbs-CBwNdfz_.js";import{S}from"./Select-5ekvuXvs.js";import{I as v,G as s}from"./IconCalendar-BrZ7LLnj.js";import{T as u}from"./Title-CZteqP86.js";import{S as A}from"./SimpleGrid-BkFloAlf.js";import{D as E}from"./Divider-B3VGLdcV.js";import{C as t}from"./Center-vgt8k7Bg.js";import{T as G}from"./TypographyStylesProvider-DnvzfGLu.js";import"./OptionsDropdown-Cwa4sV-Q.js";import"./CheckIcon-BRYYAL1z.js";import"./ScrollArea-BbLSxT-v.js";import"./get-base-value-5CYSaTUw.js";/**
 * @license @tabler/icons-react v3.4.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var L=$("outline","printer","IconPrinter",[["path",{d:"M17 17h2a2 2 0 0 0 2 -2v-4a2 2 0 0 0 -2 -2h-14a2 2 0 0 0 -2 2v4a2 2 0 0 0 2 2h2",key:"svg-0"}],["path",{d:"M17 9v-4a2 2 0 0 0 -2 -2h-6a2 2 0 0 0 -2 2v4",key:"svg-1"}],["path",{d:"M7 13m0 2a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2v4a2 2 0 0 1 -2 2h-6a2 2 0 0 1 -2 -2z",key:"svg-2"}]]);const re=l=>{console.log(l);const[b,f]=P.useState(!1),[y,x]=P.useState(null),C=y===null?l.evaluations:l.evaluations.filter(r=>r.period===Number(y)),T=r=>{var i;return(i=C.find(h=>h.id===r))==null?void 0:i.tournaments.reduce((h,d)=>d.medal==="Emas"?h+3:d.medal==="Perak"?h+2:d.medal==="Perunggu"?h+1:h,0)};return e.jsxs(R,{title:"Laporan",isPrint:b,authed:l.auth.user,meta:l.meta,unreadHistories:l.total_unread_histories,children:[b?e.jsx(u,{size:34,align:"center",mb:32,children:"Laporan"}):e.jsxs(g,{mb:32,children:[e.jsxs(n,{w:"100%",justify:"space-between",children:[e.jsx(N,{navList:[{label:"Laporan",route:"reports.index"},{label:"Rincian"}]}),e.jsxs(n,{children:[e.jsx(S,{display:{base:"none",xs:"block"},w:240,leftSection:e.jsx(v,{}),placeholder:"Pilih periode...",variant:"filled",clearable:!0,searchable:!0,nothingFoundMessage:"Tidak ada periode ditemukan",checkIconPosition:"right",onChange:r=>{x(r===null?null:r)},data:l.evaluations.map(r=>({label:`${r.period}`,value:`${r.period}`})),allowDeselect:!0,styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}}}),l.auth.user.role.includes("Pelatih")&&e.jsxs(e.Fragment,{children:[e.jsx(F,{style:{borderRadius:32,padding:".5rem 1rem"},label:"Cetak",children:e.jsx(M,{ml:"auto",h:48,w:48,color:"gold.2",radius:32,display:{base:"block",sm:"none"},onClick:()=>window.print(),children:e.jsx(L,{})})}),e.jsx(z,{display:{base:"none",sm:"block"},w:240,leftSection:e.jsx(L,{}),variant:"filled",color:"gold.2",h:48,radius:32,px:16,styles:{section:{marginRight:12}},onClick:()=>{f(!0),setTimeout(()=>{window.print(),f(!1)},1e3)},children:"Cetak"})]})]})]}),e.jsx(S,{w:"100%",clearable:!0,searchable:!0,allowDeselect:!0,nothingFoundMessage:"Tidak ada periode ditemukan",display:{base:"block",xs:"none"},leftSection:e.jsx(v,{}),placeholder:"Pilih periode...",variant:"filled",checkIconPosition:"right",onChange:r=>{x(r===null?null:r)},data:l.evaluations.map(r=>({label:`${r.period}`,value:`${r.period}`})),styles:{label:{marginBottom:8},input:{height:48,borderRadius:32,paddingLeft:50,paddingRight:16},section:{marginLeft:0,width:48,height:48},error:{marginTop:8}}})]}),e.jsxs(g,{gap:80,children:[e.jsxs(s,{align:"center",children:[e.jsx(s.Col,{span:4,children:e.jsx(I,{src:l.athlete.avatar,alt:l.athlete.full_name,size:160})}),e.jsx(s.Col,{span:8,children:e.jsxs(A,{cols:2,children:[e.jsxs(o,{children:[e.jsx(a,{children:"Nama Lengkap :"}),e.jsx(a,{fw:600,children:l.athlete.full_name})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Jenis Kelamin :"}),e.jsx(a,{fw:600,children:l.athlete.gender})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Tanggal Lahir :"}),e.jsx(a,{fw:600,children:new Date(l.athlete.birth_date).toLocaleDateString("id").split("/").join("-")})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Alamat Surel :"}),e.jsx(a,{fw:600,children:l.athlete.email})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Sistem Pertandingan :"}),e.jsx(a,{fw:600,children:l.athlete.role})]}),e.jsxs(o,{children:[e.jsx(a,{children:"Berat Badan :"}),e.jsxs(a,{fw:600,children:[l.athlete.weight," kg"]})]})]})})]}),C.map(r=>e.jsxs(g,{gap:32,children:[e.jsx(E,{label:`Periode ${r.period} (${new Date(r.start_date).toLocaleDateString("id").split("/").join("-")} - ${new Date(r.end_date).toLocaleDateString("id").split("/").join("-")})`,labelPosition:"center",styles:{label:{fontSize:14}}}),r.exercises.length&&e.jsxs(o,{children:[e.jsx(u,{fz:26,mb:8,children:"Daftar Latihan"}),e.jsxs(s,{gutter:0,children:[e.jsx(s.Col,{span:12,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Nama Latihan, Tempat, Tanggal"})}),r.exercises.map(i=>e.jsx(s.Col,{span:12,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:`${i.name} di ${i.place} pada ${new Date(i.date).toLocaleDateString("id").split("/").join("-")}`})},i.id))]})]}),r.tournaments.length&&e.jsxs(o,{children:[e.jsx(u,{fz:26,mb:8,children:"Daftar Pertandingan"}),e.jsxs(s,{gutter:0,children:[e.jsx(s.Col,{span:9,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Nama Pertandingan"})}),e.jsx(s.Col,{span:3,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Medali (Poin)"})}),e.jsx(s.Col,{span:9,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600})}),e.jsx(s.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Emas (3)"})}),e.jsx(s.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Perak (2)"})}),e.jsx(s.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Perunggu (1)"})}),r.tournaments.map(i=>e.jsxs(e.Fragment,{children:[e.jsx(s.Col,{span:9,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:i.name})}),e.jsx(s.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:i.medal==="Emas"?1:"-"})}),e.jsx(s.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:i.medal==="Perak"?1:"-"})}),e.jsx(s.Col,{span:1,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:i.medal==="Perunggu"?1:"-"})})]})),e.jsx(s.Col,{span:9,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:"Total"})}),e.jsx(s.Col,{span:3,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:T(r.id)})})]})]}),e.jsxs(o,{children:[e.jsx(u,{fz:26,mb:8,children:"Daftar Penilaian"}),e.jsxs(s,{gutter:0,children:[e.jsx(s.Col,{span:8,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Kriteria"})}),e.jsx(s.Col,{span:2,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Nilai"})}),e.jsx(s.Col,{span:2,children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:"Patokan"})}),r.criterias.map((i,h)=>e.jsxs(e.Fragment,{children:[e.jsx(s.Col,{children:e.jsx(t,{style:{border:"1px solid #e1e1e1"},px:16,h:48,fw:600,children:i.name.toUpperCase()})},h),i.sub_criterias.map((d,p)=>{const j=String.fromCharCode(65+p);return e.jsxs(e.Fragment,{children:[e.jsx(s.Col,{children:e.jsxs(n,{style:{border:"1px solid #e1e1e1"},px:16,fw:600,h:48,children:[j,". ",d.name]})},p),d.sub_sub_criterias.map((c,m)=>e.jsxs(e.Fragment,{children:[e.jsx(s.Col,{span:8,children:e.jsxs(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:[m+1,". ",c.name]})},m),e.jsx(s.Col,{span:2,children:e.jsxs(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:[c.evaluation.value," ",c.evaluation.sub_sub_criteria.unit]})}),e.jsx(s.Col,{span:2,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:l.athlete.gender==="Laki-laki"?c.evaluation.sub_sub_criteria.male_benchmark:c.evaluation.sub_sub_criteria.female_benchmark})})]}))]})}),i.type==="radio"&&e.jsxs(e.Fragment,{children:[e.jsx(s.Col,{span:8,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:"Rata-rata"})}),e.jsx(s.Col,{span:2,children:e.jsx(n,{style:{border:"1px solid #e1e1e1"},px:16,h:48,children:(()=>{let d=0;const p=i.sub_criterias.reduce((D,_)=>{const w=_.sub_sub_criterias.reduce((k,B)=>({sum:k.sum+Number(B.evaluation.value),count:k.count+1}),{sum:0,count:0});return d+=w.count,D+w.sum},0),j=Number((p/d).toFixed(2)),m={1:"Sangat buruk",2:"Buruk",3:"Cukup",4:"Baik",5:"Sangat baik"}[Math.round(j)]||"Tidak diketahui";return`${j} (${m})`})()})})]})]})),e.jsx(s.Col,{span:12,children:e.jsxs(n,{style:{overflow:"auto",border:"1px solid #e1e1e1"},px:16,py:11,children:[e.jsx(a,{fw:600,children:"Catatan : "}),e.jsx(G,{children:e.jsx("div",{dangerouslySetInnerHTML:{__html:r.note}})})]})})]})]})]},r.id))]})]})};export{re as default};
